<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBD Sayangku ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --pink: #ff788d; 
            --soft: #ffe4e8; 
            --purple: #6c5ce7;
            --yellow: #fdcb6e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

        body {
            margin: 0; width: 100vw; height: 100vh;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; 
            background: linear-gradient(-45deg, #ff788d, #fec7d7, #d4a5ff, #a2d2ff);
            background-size: 400% 400%;
            animation: gradientMove 10s ease infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #love-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .falling-love { position: absolute; top: 110vh; pointer-events: none; animation: floatUp linear forwards; }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }

        .container { width: 100%; display: flex; justify-content: center; align-items: center; z-index: 10; }
        .slide { display: none; text-align: center; animation: fadeIn 0.8s ease; width: auto; max-width: 95vw; padding: 20px; }
        .slide.active { display: flex !important; flex-direction: column; align-items: center; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .card-box { 
            background: rgba(255, 255, 255, 0.45); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 40px 30px; border-radius: 30px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 350px;
        }

        #slide2 .card-box, #slide3 .card-box, #slide4 .card-box, 
        #slide5 .card-box, #slide6 .card-box, #slide7 .card-box, #slide10 .card-box {
            background: none !important; backdrop-filter: none !important;
            border: none !important; box-shadow: none !important;
        }
        
        #slide2 h3, #slide3 p, #slide4 h3, #slide5 p, #slide6 p, #slide7 p, #slide10 h3 {
            color: white; font-size: 20px; font-weight: 600;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3); max-width: 320px;
            margin-bottom: 20px;
        }

        button { padding: 12px 25px; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .primary { background: var(--pink); color: white; box-shadow: 0 4px 15px rgba(255,120,141,0.3); }
        .secondary { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.4); }
        button:hover { transform: scale(1.05); }

        .btn-gift {
            width: 100%; padding: 15px 20px; margin-bottom: 12px; border: none; border-radius: 20px;
            color: white; font-weight: 600; font-size: 16px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 12px;
            transition: 0.3s; box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        .btn-video { background: linear-gradient(45deg, #ff788d, #ffb1b1); animation: pulse 3s infinite; }
        .btn-audio { background: linear-gradient(45deg, #6c5ce7, #a29bfe); animation: pulse 3s infinite 0.5s; }
        .btn-surat { background: linear-gradient(45deg, #fdcb6e, #ffeaa7); color: #6d4c41; animation: pulse 3s infinite 1s; }

        .split-wrapper { 
            display: flex; transition: 0.8s; border-radius: 30px; overflow: hidden; 
            background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px);
        }
        .card-main { width: 340px; padding: 30px; }
        .card-side { width: 0; opacity: 0; transition: 0.7s; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .split-wrapper.active .card-side { width: 450px; opacity: 1; padding: 20px; border-left: 1px solid #eee; }

        input { width: 100%; padding: 12px; border-radius: 15px; border: 2px solid white; text-align: center; margin: 20px 0; background: rgba(255,255,255,0.5); }
        .gif-frame { width: 220px; height: 220px; border-radius: 20px; object-fit: cover; margin-bottom: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .surat-teks { text-align: left; background: white; padding: 25px; border-radius: 20px; line-height: 1.6; font-size: 14px; border-left: 5px solid var(--pink); width: 350px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 15px; overflow: hidden; }

        @media (max-width: 850px) {
            .split-wrapper.active { flex-direction: column; }
            .split-wrapper.active .card-side { width: 340px; border-top: 1px solid #eee; border-left: none; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop src="lagu.mp3"></audio>
    <div id="love-container"></div>

    <div class="container">
        <div class="slide active" id="slide1">
            <div class="card-box">
                <h2 style="font-family: 'Playfair Display';">Ada Kado Buat Kamu üéÅ</h2>
                <p style="font-size: 12px; color: #666; margin-top: 10px;">Masukkan tanggal hari ini / jadian</p>
                <input type="text" id="passInput" placeholder="DDMMYY" maxlength="6">
                <button class="primary" onclick="checkPass()">Buka Sekarang ‚ú®</button>
            </div>
        </div>

        <div class="slide" id="slide2"><div class="card-box"><img src="kucing1.gif" class="gif-frame"><h3>Halooo Sayangkuuu! ‚ù§Ô∏è</h3><button class="primary" onclick="next(3)">Next</button></div></div>
        <div class="slide" id="slide3"><div class="card-box"><img src="kucing2.gif" class="gif-frame"><p>Coba tebak hari ini hari apa? Hehe..</p><div class="btn-group"><button class="secondary" onclick="next(2)">Back</button><button class="primary" onclick="next(4)">Hari Apa Ya? ü§î</button></div></div></div>
        <div class="slide" id="slide4"><div class="card-box"><img src="kucing3.gif" class="gif-frame"><h3>Happy Birthday PretyyGurlll! üéÇü•≥</h3><div class="btn-group"><button class="secondary" onclick="next(3)">Back</button><button class="primary" onclick="next(5)">Yeayyy! ‚ú®</button></div></div></div>
        <div class="slide" id="slide5"><div class="card-box"><img src="kucing4.gif" class="gif-frame"><p>Makasih ya udah lahir ke dunia dan nemenin aku terus.</p><div class="btn-group"><button class="secondary" onclick="next(4)">Back</button><button class="primary" onclick="next(6)">Sama-sama ‚ù§Ô∏è</button></div></div></div>
        <div class="slide" id="slide6"><div class="card-box"><img src="kucing5.gif" class="gif-frame"><p>Aku punya sesuatu buat kamu...</p><div class="btn-group"><button class="secondary" onclick="next(5)">Back</button><button class="primary" onclick="next(7)">Apa tuhh? üéÅ</button></div></div></div>
        <div class="slide" id="slide7"><div class="card-box"><img src="kucing6.gif" class="gif-frame"><p>Mau baca pesan spesial dari aku ga? </p><div class="btn-group"><button class="secondary" onclick="next(6)">Back</button><button class="primary" onclick="startTypewriter()">Baca Pesannya ‚ú®</button></div></div></div>

        <div class="slide" id="slide8">
            <h3 style="color:white; margin-bottom:15px; text-shadow:2px 2px 10px rgba(0,0,0,0.2);">Happy Level Up! ‚ù§Ô∏è</h3>
            <div class="surat-teks" id="typewriter"></div>
            <div style="margin-top:20px">
                <button class="secondary" onclick="next(7)">Ulangi</button>
                <button class="primary" id="btnS8" style="display:none;" onclick="next(9)">Ambil Kado üéÅ</button>
            </div>
        </div>

        <div class="slide" id="slide9">
            <div class="split-wrapper" id="vWrapper">
                <div class="card-main">
                    <h3 style="margin-bottom:20px">Kado Spesial üéÅ</h3>
                    <button class="btn-gift btn-video" onclick="toggleSide('video')"><span>üé¨</span> Behind the scene</button>
                    <button class="btn-gift btn-surat" onclick="toggleSide('spotify')"><span>‚úâÔ∏è</span> Barcode Rahasia</button>
                    <div style="margin-top:20px">
                        <button class="secondary" onclick="next(8)">Balik</button>
                        <button class="primary" onclick="next(10)">Selesai ‚ú®</button>
                    </div>
                </div>
                <div class="card-side"><div id="sideContent" style="width:100%"></div></div>
            </div>
        </div>

        <div class="slide" id="slide10">
            <div class="card-box">
                <img src="kucing7.gif" class="gif-frame">
                <h3>I Love You More! ‚ù§Ô∏è</h3>
                <p style="color:white; font-size:14px">Sehat selalu ya sayang, bahagia terus bareng aku.</p>
                <button class="secondary" style="margin-top:15px" onclick="next(9)">Back</button>
            </div>
        </div>
    <!-- </div> -->

    <script>
        const audio = document.getElementById('bgMusic');
        // --- DATA KAMU ---
        const linkSurat = "https://docs.google.com/document/d/1OWmjAqnX7JexiMS4P8j5RrRctirg4DA5/edit?usp=drivesdk&ouid=107957317494233230309&rtpof=true&sd=true";
        const linkSpotify = "https://open.spotify.com/playlist/4MaGBzcHy4y3wk4IEsWawz?si=10e0e01a4ae5412a&pt=7b40bf9f0946c7a0409ec73dd32677fe";
        const fileVideo = "videonopal.mp4";

        function fadeVolume(target, duration = 1000) {
            const start = audio.volume;
            const step = (target - start) / (duration / 10);
            const interval = setInterval(() => {
                let nextVol = audio.volume + step;
                if ((step > 0 && nextVol >= target) || (step < 0 && nextVol <= target)) {
                    audio.volume = target; clearInterval(interval);
                } else { audio.volume = Math.min(1, Math.max(0, nextVol)); }
            }, 10);
        }

        function createHearts() {
            const container = document.getElementById('love-container');
            const icons = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíï', 'üå∏', 'üéà', 'üéÇ'];
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('falling-love');
                heart.innerHTML = icons[Math.floor(Math.random() * icons.length)];
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.fontSize = Math.random() * 10 + 15 + "px";
                heart.style.animationDuration = Math.random() * 3 + 4 + "s";
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 7000);
            }, 400);
        }
        createHearts();

        function checkPass() {
            if(document.getElementById('passInput').value === "271209") {
                audio.play().then(() => { audio.volume = 0; fadeVolume(1.0); }).catch(e => console.log("Audio blocked"));
                next(2);
            } else { alert("Wah, password-nya salah sayang! Coba lagi ya ü•∫"); }
        }

        function next(n) {
            const slides = document.querySelectorAll('.slide');
            slides.forEach(s => { s.classList.remove('active'); s.style.display = 'none'; });
            const target = document.getElementById('slide' + n);
            if(target) { target.classList.add('active'); target.style.display = 'flex'; }
            if(document.getElementById('vWrapper')) document.getElementById('vWrapper').classList.remove('active');
            fadeVolume(1.0);
        }

        function startTypewriter() {
            next(8);
            if(window.confetti) confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            const pesan = "Happy Birthday ya sayang! ‚ù§Ô∏è Gak kerasa kamu udah tambah umur lagi. Doa aku buat kamu ga banyak aku cuma pengen kamu selalu sehat, selalu bahagia, dan dimudahkan segala urusannya. Makasih udah jadi orang yang sabar banget ngadepin aku. Semoga kita bisa terus ngerayain ulang tahun bareng-bareng sampe tahun-tahun berikutnya ya. I love you so much! üéÇüíñ";
            let i = 0; const target = document.getElementById('typewriter'); target.innerHTML = "";
            function type() {
                if (i < pesan.length) { target.innerHTML += pesan.charAt(i); i++; setTimeout(type, 50); }
                else { document.getElementById('btnS8').style.display = "inline-block"; }
            }
            type();
        }

        function toggleSide(tipe) {
            const wrapper = document.getElementById('vWrapper');
            const content = document.getElementById('sideContent');
            wrapper.classList.add('active');
            
            if(tipe === 'video') {
                fadeVolume(0.1);
                content.innerHTML = `<div style="padding:20px; text-align:center;">
                    <h4 style="margin-bottom:10px">Spesial Buat Kamu üé¨</h4>
                    <div class="video-container">
                        <video controls style="width:100%; border-radius:15px;">
                            <source src="${fileVideo}" type="video/mp4">
                        </video>
                    </div>
                </div>`;
            } else if(tipe === 'spotify') {
                // TAHAP 1: Munculkan Lagu
                fadeVolume(1.0);
                content.innerHTML = `<div style="text-align:center; padding:20px;">
                    <h4 style="color:#1DB954">Sebelum lanjut kamu pilih 1 lagu buat nemenin kamu üéµ</h4>
                    <p style="font-size:12px; margin-bottom:15px;">Jangan lupa balik kesini lagi ya.. ‚ù§Ô∏è</p>
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${linkSpotify}" style="border-radius:15px; margin-bottom:15px;">
                    <br>
                    <button class="primary" onclick="window.open('${linkSpotify}'); showSurat();" style="background:#1DB954">Buka Spotify & Lanjut</button>
                </div>`;
            }
        }

        // TAHAP 2: Munculkan Barcode Surat
        function showSurat() {
            const content = document.getElementById('sideContent');
            content.innerHTML = `<div style="text-align:center; padding:20px; animation: fadeIn 0.8s ease;">
                <h4>Sekarang Baca Ini ‚úâÔ∏è</h4>
                <p style="font-size:12px; margin-bottom:15px;">Surat spesial buat kamu</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${linkSurat}" style="border-radius:15px; border:5px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom:15px;">
                <br>
                <button class="primary" onclick="window.open('${linkSurat}')">Buka Surat</button>
            </div>`;
        }
    </script>
</body>
</html>